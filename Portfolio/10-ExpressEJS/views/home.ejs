<%- include("partials/header"); -%>

<img src="../images/StarLion.png" alt="lion brewery" />
<h1>Welcome to my landing page</h1>
<form action="/login" method="POST">
    <label for="name">Name</label>
    <input type="text" name="name" id="name" />
    <input type="submit" />
</form>

<% if (name) { %>
  <p>Hello, <%= name %>! You reached us via <%= method %>.</p>

  <form action="/newpost" method="POST">
    <label for="title">Title</label>
    <input type="text" name="title" id="title" required />
    
    <label for="content">Content</label>
    <textarea name="content" id="content" required></textarea>
    
    <input type="submit" value="Submit Post" />
  </form>

  <h2>Available Posts</h2>
  <% posts.forEach(post => { %>
    <div>
      <h3><%= post.title %></h3>
      <p>
        <%= post.content.substring(0, 100) %><% if (post.content.length > 100) { %>...<% } %>
      </p>
      <a href="/post/<%= post.id %>">Read More</a>
    </div>
  <% }); %>
<% } else { %>
  <script>
    window.location.href = "./index.html";
  </script>
<% } %>

<%- include("partials/footer"); -%>